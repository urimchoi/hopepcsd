// Generated by CoffeeScript 1.7.1
(function() {
  var Events;

  Events = {
    init: function() {
      var that;
      console.log('fire!');
      that = this;
      $('#events-content').on('click', '.more-button', function() {
        var button;
        button = this;
        return $.ajax({
          url: that.fbApiUrl + $(this).attr('data-id') + that.accessToken + $('body').attr('data-fbtoken'),
          dataType: 'json',
          beforeSend: function() {
            $(button).hide();
            return $(button).parent().append('<span class="icon-spin3 animate-spin"></span>');
          },
          success: function(response) {
            var parsedText;
            $(button).siblings('span').remove();
            parsedText = JSON.stringify(response.description);
            parsedText = parsedText.replace(/\\n\\n/g, "</p><p class='event-text fade-in-instant'>").replace(/\\n/g, "<br>").replace(/\"/g, "").replace(/\\"/g, '"');
            $(button).parent().append('<p class="event-text fade-in-instant">' + parsedText + '</p>').append($(button).siblings('.close-button'));
            return $(button).siblings('.close-button').show();
          }
        });
      });
      $('#events-content').on('click', '.close-button', function() {
        $(this).hide();
        $(this).siblings('.event-text').slideUp(200);
        return $(this).siblings('.more-button').show();
      });
      return $('#events-content').on('click', '.rsvp-button', function() {
        return $(this).empty().removeClass('icon-calendar-empty').addClass('icon-ok').append("RSVP'ed!");
      });
    },
    fbApiUrl: "https://graph.facebook.com/v2.0/",
    accessToken: "?access_token="
  };

  $(document).ready(function() {
    Events.init();
    return console.log('firing');
  });

}).call(this);
